{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/stanleyjeong/Desktop/_CODING/_PROJECTS 25 projects/z_SJ_Portfolio 2020/MEMOIR/Memoir/components/Exercise.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\n\nvar _Dimensions$get = Dimensions.get('window'),\n    width = _Dimensions$get.width,\n    height = _Dimensions$get.height;\n\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport * as FileSystem from 'expo-file-system';\nimport firebase from 'firebase';\nexport default function Exercise(_ref) {\n  var _this = this;\n\n  var uniqueSize = _ref.uniqueSize,\n      uniqueImgEvening = _ref.uniqueImgEvening,\n      image = _ref.image,\n      gif = _ref.gif,\n      title = _ref.title,\n      subTitle = _ref.subTitle,\n      navigation = _ref.navigation,\n      videoFile = _ref.videoFile,\n      modalIcon = _ref.modalIcon,\n      iconHeight = _ref.iconHeight,\n      id = _ref.id,\n      autoCountDown = _ref.autoCountDown,\n      customWidth = _ref.customWidth,\n      customVolume = _ref.customVolume,\n      isLiked = _ref.isLiked,\n      noFinishBell = _ref.noFinishBell,\n      notSignedIn = _ref.notSignedIn;\n  var currentHour = new Date().getHours();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      liked = _useState2[0],\n      setLiked = _useState2[1];\n\n  var currUser = firebase.auth().currentUser;\n  var favRef = currUser && firebase.database().ref(currUser.uid).child('favorites');\n  useEffect(function () {\n    updateLiked();\n  });\n  var favIds = [];\n\n  var updateLiked = function updateLiked() {\n    if (currUser) {\n      favRef.on(\"value\", function (snapshot) {\n        snapshot.forEach(function (node) {\n          favIds.push(node.val().id);\n        });\n      });\n    }\n\n    setLiked(favIds.includes(id) || isLiked);\n  };\n\n  useEffect(function () {\n    cacheAsset(image);\n    cacheAsset(videoFile);\n  }, []);\n  var storage = firebase.storage();\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      cachedImg = _useState4[0],\n      setCachedImg = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      cachedVideo = _useState6[0],\n      setCachedVideo = _useState6[1];\n\n  var cacheAsset = function cacheAsset(asset) {\n    var fileType, path, file, folder, ref, uri, newAsset;\n    return _regeneratorRuntime.async(function cacheAsset$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.t0 = asset;\n\n            if (!_context.t0) {\n              _context.next = 6;\n              break;\n            }\n\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(asset.match(/[^.]+$/g)[0]);\n\n          case 4:\n            _context.t1 = _context.sent;\n            _context.t0 = _context.t1 === \"png\";\n\n          case 6:\n            if (!_context.t0) {\n              _context.next = 10;\n              break;\n            }\n\n            _context.t2 = \"image\";\n            _context.next = 11;\n            break;\n\n          case 10:\n            _context.t2 = asset.match(/[^.]+$/g)[0] === \"gif\" ? \"image\" : asset.match(/[^.]+$/g)[0] === \"mp4\" ? \"video\" : \"unknown file type!\";\n\n          case 11:\n            fileType = _context.t2;\n            path = \"\" + FileSystem.cacheDirectory + asset;\n            _context.next = 15;\n            return _regeneratorRuntime.awrap(FileSystem.getInfoAsync(path));\n\n          case 15:\n            file = _context.sent;\n\n            if (!file.exists) {\n              _context.next = 29;\n              break;\n            }\n\n            if (!(fileType == \"image\")) {\n              _context.next = 21;\n              break;\n            }\n\n            setCachedImg({\n              uri: file.uri\n            });\n            _context.next = 26;\n            break;\n\n          case 21:\n            if (!(fileType == \"video\")) {\n              _context.next = 25;\n              break;\n            }\n\n            setCachedVideo({\n              uri: file.uri\n            });\n            _context.next = 26;\n            break;\n\n          case 25:\n            return _context.abrupt(\"return\");\n\n          case 26:\n            return _context.abrupt(\"return\");\n\n          case 29:\n            folder = fileType == \"image\" || fileType == \"gif\" ? \"exercise-images\" : fileType == \"video\" ? \"videos\" : null;\n            ref = storage.ref(\"/\" + folder + \"/\" + asset);\n            _context.next = 33;\n            return _regeneratorRuntime.awrap(ref.getDownloadURL());\n\n          case 33:\n            uri = _context.sent;\n            _context.next = 36;\n            return _regeneratorRuntime.awrap(FileSystem.downloadAsync(uri, path));\n\n          case 36:\n            newAsset = _context.sent;\n\n            if (!(fileType == \"image\")) {\n              _context.next = 41;\n              break;\n            }\n\n            setCachedImg({\n              uri: newAsset.uri\n            });\n            _context.next = 46;\n            break;\n\n          case 41:\n            if (!(fileType == \"video\")) {\n              _context.next = 45;\n              break;\n            }\n\n            setCachedVideo({\n              uri: newAsset.uri\n            });\n            _context.next = 46;\n            break;\n\n          case 45:\n            return _context.abrupt(\"return\");\n\n          case 46:\n            return _context.abrupt(\"return\");\n\n          case 47:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var JumboExercise = function JumboExercise() {\n    return React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return notSignedIn ? console.log(\"not signed in!\") : navigation.navigate(\"ExerciseVideo\", {\n          id: id,\n          videoFile: videoFile,\n          cachedVideo: cachedVideo,\n          modalIcon: modalIcon,\n          iconHeight: iconHeight,\n          autoCountDown: autoCountDown || null,\n          customVolume: customVolume || null,\n          noFinishBell: noFinishBell || null,\n          modalText: currentHour >= 20 || currentHour <= 3 ? \"eveningWindDown\" : \"dailyExhale\"\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 5\n      }\n    }, React.createElement(Image, {\n      source: cachedImg,\n      style: {\n        height: height * 0.4,\n        width: width * 0.9\n      },\n      resizeMode: \"contain\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }\n    }));\n  };\n\n  var HorizontalExercise = function HorizontalExercise() {\n    return React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return notSignedIn ? console.log(\"not signed in!\") : navigation.navigate(\"ExerciseVideo\", {\n          id: id,\n          videoFile: videoFile,\n          cachedVideo: cachedVideo,\n          modalIcon: modalIcon,\n          iconHeight: iconHeight,\n          autoCountDown: autoCountDown || null,\n          noFinishBell: noFinishBell || null\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }\n    }, React.createElement(Image, {\n      source: cachedImg,\n      style: {\n        width: width * customWidth,\n        height: height * 0.17\n      },\n      resizeMode: \"contain\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }\n    }));\n  };\n\n  var ThumbnailExercise = function ThumbnailExercise() {\n    return React.createElement(View, {\n      style: styles.imageSmallContainer,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 5\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return notSignedIn ? console.log(\"not signed in!\") : navigation.navigate(\"ExerciseVideo\", {\n          id: id,\n          videoFile: videoFile,\n          cachedVideo: cachedVideo,\n          modalIcon: modalIcon,\n          iconHeight: iconHeight,\n          autoCountDown: autoCountDown || null,\n          customVolume: customVolume || null,\n          noFinishBell: noFinishBell || null,\n          uniqueImgEvening: uniqueImgEvening || null\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }\n    }, React.createElement(Image, {\n      source: cachedImg,\n      style: gif ? styles.gifSmall : styles.imageSmall,\n      resizeMode: \"contain\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }\n    }), liked ? React.createElement(Image, {\n      source: require(\"../assets/exercises-images/liked-heart.png\"),\n      style: styles.heart,\n      resizeMode: \"contain\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }) : null), React.createElement(Text, {\n      style: styles.exerciseTitleFont,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 7\n      }\n    }, title), React.createElement(Text, {\n      style: styles.exerciseSubTitleFont,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 7\n      }\n    }, subTitle));\n  };\n\n  return uniqueSize == \"topBanner\" ? React.createElement(JumboExercise, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 33\n    }\n  }) : uniqueSize == \"horizontal\" ? React.createElement(HorizontalExercise, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 34\n    }\n  }) : React.createElement(ThumbnailExercise, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 5\n    }\n  });\n}\n;\nvar styles = StyleSheet.create({\n  imageSmall: {\n    width: width * 0.44,\n    height: height * 0.35\n  },\n  gifSmall: {\n    width: width * 0.43,\n    height: height * 0.31,\n    marginBottom: 25,\n    marginTop: 25\n  },\n  imageSmallContainer: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginBottom: 25\n  },\n  exerciseTitleFont: {\n    fontFamily: \"Assistant-SemiBold\",\n    fontSize: 18\n  },\n  exerciseSubTitleFont: {\n    fontFamily: \"Assistant-SemiBold\",\n    fontSize: 14,\n    color: \"#737373\"\n  },\n  heart: {\n    height: 26,\n    width: 26,\n    position: \"absolute\",\n    bottom: \"13%\",\n    right: \"18%\"\n  }\n});","map":{"version":3,"sources":["/Users/stanleyjeong/Desktop/_CODING/_PROJECTS 25 projects/z_SJ_Portfolio 2020/MEMOIR/Memoir/components/Exercise.jsx"],"names":["React","useState","useEffect","Dimensions","get","width","height","TouchableOpacity","FileSystem","firebase","Exercise","uniqueSize","uniqueImgEvening","image","gif","title","subTitle","navigation","videoFile","modalIcon","iconHeight","id","autoCountDown","customWidth","customVolume","isLiked","noFinishBell","notSignedIn","currentHour","Date","getHours","liked","setLiked","currUser","auth","currentUser","favRef","database","ref","uid","child","updateLiked","favIds","on","snapshot","forEach","node","push","val","includes","cacheAsset","storage","cachedImg","setCachedImg","cachedVideo","setCachedVideo","asset","match","fileType","path","cacheDirectory","getInfoAsync","file","exists","uri","folder","getDownloadURL","downloadAsync","newAsset","JumboExercise","console","log","navigate","modalText","HorizontalExercise","ThumbnailExercise","styles","imageSmallContainer","gifSmall","imageSmall","require","heart","exerciseTitleFont","exerciseSubTitleFont","StyleSheet","create","marginBottom","marginTop","justifyContent","alignItems","fontFamily","fontSize","color","position","bottom","right"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Text, View, Image, Dimensions, StyleSheet } from 'react-native';\nconst { width, height } = Dimensions.get('window');\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport * as FileSystem from 'expo-file-system';\nimport firebase from 'firebase';\n\n\nexport default function Exercise({ uniqueSize, uniqueImgEvening, image, gif, title, subTitle, navigation, videoFile, modalIcon, iconHeight, id, autoCountDown, customWidth, customVolume, isLiked, noFinishBell, notSignedIn }) {\n  const currentHour = new Date().getHours();\n  const [liked, setLiked] = useState(false);\n  const currUser = firebase.auth().currentUser;\n  const favRef = currUser && firebase.database().ref(currUser.uid).child('favorites');\n\n  useEffect(() => {\n    updateLiked();\n  })\n\n  let favIds = [];\n  const updateLiked = () => {\n    if (currUser) {\n      favRef.on(\"value\", snapshot => {\n        snapshot.forEach(node => {\n          favIds.push(node.val().id)\n        })\n      })\n    }\n    setLiked(favIds.includes(id) || isLiked);\n  };\n\n\n  /* CACHE ASSET */\n  useEffect(() => {\n    cacheAsset(image);\n    cacheAsset(videoFile);\n  }, [])\n  \n  const storage = firebase.storage();\n  const [cachedImg, setCachedImg] = useState();\n  const [cachedVideo, setCachedVideo] = useState();\n\n  const cacheAsset = async asset => {\n    const fileType = asset && await asset.match(/[^.]+$/g)[0] === \"png\" ? \"image\" : \n                              asset.match(/[^.]+$/g)[0] === \"gif\" ? \"image\" : \n                              asset.match(/[^.]+$/g)[0] === \"mp4\" ? \"video\" : \"unknown file type!\";\n\n    // Example: cacheDirectory/flowers.png\n    const path = `${FileSystem.cacheDirectory}${asset}`;\n    const file = await FileSystem.getInfoAsync(path);\n\n    if (file.exists) {\n      // If it was already cached, read from the cache\n      if (fileType == \"image\")      setCachedImg( {uri: file.uri} );\n      else if (fileType == \"video\") setCachedVideo( {uri: file.uri} );\n      else return;\n      return; \n    } else {\n      // Else, if it wasn't cached, getDownloadURL from Firebase and download/cache using FileSystem\n      const folder = fileType == \"image\" || fileType == \"gif\" ? \"exercise-images\" : fileType == \"video\" ? \"videos\" : null;\n      const ref = storage.ref(`/${folder}/${asset}`);\n      const uri = await ref.getDownloadURL();\n      const newAsset = await FileSystem.downloadAsync(uri, path);\n      if (fileType == \"image\")      setCachedImg( {uri: newAsset.uri} );\n      else if (fileType == \"video\") setCachedVideo( {uri: newAsset.uri} );\n      else return;\n      return;\n    }\n  };\n\n\n  const JumboExercise = () => (\n    <TouchableOpacity onPress={() => notSignedIn ? console.log(\"not signed in!\") : \n      navigation.navigate(\"ExerciseVideo\", { \n        id, \n        videoFile, \n        cachedVideo, \n        modalIcon, \n        iconHeight, \n        autoCountDown: autoCountDown || null, \n        customVolume: customVolume || null, \n        noFinishBell: noFinishBell || null, \n        modalText: currentHour >= 20 || currentHour <= 3 ? \"eveningWindDown\" : \"dailyExhale\" \n      })}>\n      <Image \n        source={ cachedImg }\n        style={{ height: height * 0.4, width: width * 0.9, }}\n        resizeMode=\"contain\"\n      />\n    </TouchableOpacity> \n  );\n\n  const HorizontalExercise = () => (\n    <TouchableOpacity onPress={() => notSignedIn ? console.log(\"not signed in!\") : \n      navigation.navigate(\"ExerciseVideo\", { \n        id, \n        videoFile, \n        cachedVideo, \n        modalIcon, \n        iconHeight, \n        autoCountDown: autoCountDown || null, \n        noFinishBell: noFinishBell || null \n      })}>\n      <Image \n        source={ cachedImg }\n        style={{width: width * customWidth, height: height * 0.17 }}\n        resizeMode=\"contain\" \n      />\n    </TouchableOpacity>\n  );\n\n  const ThumbnailExercise = () => (\n    <View style={styles.imageSmallContainer}>\n      <TouchableOpacity onPress={() => notSignedIn ? console.log(\"not signed in!\") : \n        navigation.navigate(\"ExerciseVideo\", { \n          id, \n          videoFile, \n          cachedVideo, \n          modalIcon, \n          iconHeight, \n          autoCountDown: autoCountDown || null, \n          customVolume: customVolume || null, \n          noFinishBell: noFinishBell || null, \n          uniqueImgEvening: uniqueImgEvening || null \n        })}>\n        <Image \n          source={ cachedImg }\n          style={gif ? styles.gifSmall : styles.imageSmall } \n          resizeMode=\"contain\"\n        />\n        {liked ? \n        <Image source={require('../assets/exercises-images/liked-heart.png')} style={styles.heart} resizeMode=\"contain\"/>\n        : null}\n      </TouchableOpacity>\n      <Text style={styles.exerciseTitleFont}>{title}</Text>\n      <Text style={styles.exerciseSubTitleFont}>{subTitle}</Text>\n    </View>\n  );\n\n\n  return ( \n    uniqueSize == \"topBanner\" ? <JumboExercise /> \n    : \n    uniqueSize == \"horizontal\" ? <HorizontalExercise /> \n    : \n    <ThumbnailExercise />\n  )\n};\n\n\nconst styles = StyleSheet.create({\n  imageSmall: {\n    width: width * 0.44,\n    height: height * 0.35,\n  },\n  gifSmall: {\n    width: width * 0.43,\n    height: height * 0.31,\n    marginBottom: 25,\n    marginTop: 25\n  },\n  imageSmallContainer: {\n    // borderWidth: 1, \n    // width: 185,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginBottom: 25\n  },\n  exerciseTitleFont: {\n    fontFamily: \"Assistant-SemiBold\",\n    fontSize: 18,\n  },\n  exerciseSubTitleFont: {\n    fontFamily: \"Assistant-SemiBold\",\n    fontSize: 14,\n    color: \"#737373\"\n  },\n  heart: {\n    height: 26,\n    width: 26,\n    position: \"absolute\",\n    bottom: \"13%\",\n    right: \"18%\"\n  }\n});"]},"metadata":{},"sourceType":"module"}